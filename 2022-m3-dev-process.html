<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10.0, user-scalable=yes">

	<title>M3: ML Entwicklungsprozess</title>

	<link rel="stylesheet" href="reveal.js/dist/reset.css">
	<link rel="stylesheet" href="reveal.js/dist/reveal.css">
	<!-- <link rel="stylesheet" href="reveal.js/dist/theme/black.css"> -->
	<link rel="stylesheet" href="reveal.js/dist/theme/white.css">

	<!-- Theme used for syntax highlighted code -->
	<!-- <link rel="stylesheet" href="reveal.js/plugin/highlight/monokai.css"> -->
	<link rel="stylesheet" href="reveal.js/plugin/highlight/zenburn.css">
	<style>
		.right-img {
			margin-left: 10px !important;
			float: right;
			height: 500px;
		}

		.todo:before {
			content: 'TODO: ';
		}

		.todo {
			color: red !important;
		}

		code span.line-number {
			color: lightcoral;
		}

		.reveal pre code {
			max-height: 1000px !important;
		}

		img {
			border: 0 !important;
			box-shadow: 0 0 0 0 !important;
			height: 450px;
		}

		.reveal {
			-ms-touch-action: auto !important;
			touch-action: auto !important;
		}

		.reveal h1,
		.reveal h2,
		.reveal h3,
		.reveal h4 {
			/* letter-spacing: 2px; */
			font-family: 'Calibri', sans-serif;
			/* font-family: 'Times New Roman', Times, serif; */
			/* font-weight: bold; */
			color: black;
			/* font-style: italic; */
			/* letter-spacing: -2px; */
			text-transform: none !important;
		}

		.reveal em {
			font-weight: bold;
		}

		.reveal section img {
			background: none;
		}

		.reveal img.with-border {
			border: 1px solid #586e75 !important;
			box-shadow: 3px 3px 1px rgba(0, 0, 0, 0.15) !important;
		}

		.reveal li {
			margin-bottom: 8px;
		}

		/* For li's that use FontAwesome icons as bullet-point */
		.reveal ul.fa-ul li {
			list-style-type: none;
		}

		.reveal {
			/* font-family: 'Work Sans', 'Calibri'; */
			font-family: 'Calibri';
			color: black !important;
			font-size: xx-large;
		}

		.container {
			display: flex;
		}

		.col,
		col-1 {
			flex: 1;
		}

		.col-2 {
			flex: 2;
		}
	</style>

</head>

<body style="background-color: whitesmoke;">
	<div class="reveal">
		<div class="slides">

<section data-markdown class="local preparation hide">
- Jupyter Notebook in richtigem Environment
- Jupyter lab als Alternative zeigen	
</section>
<!-- 
https://www.m3-konferenz.de/veranstaltung-14114-0-der-entwicklungsprozess-eines-machine-learning-projekts.html
2.6.2022: 10:30 - 11:15
45 Minuten

Der Entwicklungsprozess eines Machine-Learning-Projekts

Ein Tutorial aus dem Internet zu programmieren oder an einem Kaggle-Wettbewerb teilzunehmen, das ist etwas ganz anderes
als die Entwicklung eines Machine-Learning-Modells, das als Teil eines Software-Stacks in Produktion gehen kann. Eine
der wesentlichen Herausforderungen ist, dass man einerseits interaktiv und explorativ vorgehen m√∂chte, aber gleichzeitig
robuste und wartbare Software schreiben muss.

In diesem Talk beschreiben wir ein Modell f√ºr die unterschiedlichen Phasen eines Machine-Learning-Projekts und zeigen im
technischen Detail, welche Artefakte in welcher Phase entstehen und wie diese in andere Phasen √ºbergehen. 
-->

<section data-markdown>
	<textarea data-template>
## Der Entwicklungsprozess eines Machine-Learning-Projekts                

M3 2022, https://www.m3-konferenz.de/veranstaltung-14114-0-der-entwicklungsprozess-eines-machine-learning-projekts.html

Oliver Zeigermann / oliver.zeigermann@openknowledge.de

Mikio Braun / mikiobraun@gmail.com

### Folien: https://bit.ly/m3-2022-ml-dev

	</textarea>
</section>


<section data-markdown>
	<textarea data-template>
<img src='img/model-eval.png'>

<small>

	https://twitter.com/marktenenholtz/status/1528021809697792003</small>
		</textarea>
</section>

<section data-markdown>
	<textarea data-template>
		### ML in Produktion bringen
		1. Model trainieren & deployen
		2. ???
		3. Profit?
	</textarea>
</section>

<section data-markdown class="todo">

Mikio Braun üíâüíâüíâüëç (@mikiobraun) twitterte um 4:40 PM on So., Apr. 03, 2022:
Yeah, being good at solving ML problems is great, but in reality you need to be able to make the connection to real customer or business problems, and I‚Äòm not convinced Kaggle trains you well for that.
(https://twitter.com/mikiobraun/status/1510628208223215626?t=84GuxLORxTEDQpJmMxOEsQ&s=03) 
</section>

	
  

			<!-- <section data-markdown class="todo">
### High Level Strategy ist wie ML Prozess

John Cutler (@johncutlefish) twitterte um 5:12 PM on Sa., Feb. 19, 2022:
Most teams jump from high level strategy/goals straight to feature ideas (w/ "success metrics")

The most successful teams
1. Have a strategy
2. Translate that into models
3. Add minimally viable measurement
4. Identify leverage points
5. Explore options
6. Run experiments https://t.co/EW8flIoA2M
(https://twitter.com/johncutlefish/status/1495068676508176385?t=U5bOFyDJOwl4eZdRhfmuLQ&s=03) 
</section> -->

<section data-markdown class="todo">
### Professionalisierung muss gut abh√§ngen
  - Erste Version der exrahierten Module mit Sicherheit nicht endg√ºltig
  - Unit Tests k√∂nnen dabei helfen

- Phase II: gefundenen Ansatz weiter verfeinern, partiell zur√ºck auf 1

</section>

<!-- <section data-markdown class="todo">
	<textarea data-template>

### Small Modules or one large monolith

<img src="img/sketch/small-model.jpg">

* Habe ich ein gutes Beispiel f√ºr Micro ML, dessen Eigenschaften √∂ffentlich sind?

</textarea>	
	</section>

	<section data-markdown class="todo">

	https://greylock.com/citc-market-map/
</section>

<section data-markdown class="todo">

Vorteil dickes NN: Konstantes Bed√ºrfnis an Ressourcen
</section> -->
	
	
<section data-markdown class="todo">
### Scripte in Phase II	
* Manche Notebooks werden in Phase zu Skripten, die eine d√ºnne API um die Module sind. K√∂nnen auch in CI/CD gebaut werden.
* Training als Script oft nicht sinnvoll bei Deep Learning, da viel Anpassungen notwendig und besondere Ablaufumgebung mit nicht geteilten Ressourcen notwendig.

</section>

<section data-markdown class="todo">
### FAQ	
* Wie sorgt man daf√ºr, dass die Notebooks nicht vergammeln und bei Anpassungen der lib nicht kaputt gehen
* Antwort: gar nicht. Solange sie keine Scripte sind sind sie nicht stabil. 

</section>

<section data-markdown class="todo">
###	Phase 2: Derive Business Metrik

* H√§tte man gern von Anfang an
* Geht damit Hand-in-Hand
* H√§ufig hat man Anfang noch gar keine Ahnung, wie so eine Metrik aussehen w√ºrde
* Bzw. die Leute die das Dom√§nenwissen haben, kriegen das nicht formal sortiert
* Aufwand f√ºr die Sortierung lohnt sich evtl. gar nicht, weil man sowieso Phase I gar nicht verl√§sst oder zumindest nicht mit dem Ansatz
* https://twitter.com/mikiobraun/status/1491089570015989762
  * https://mikiobraun.wordpress.com/2022/02/08/why-recipes-for-machine-learning-solutions-dont-work/
  * Olli
    * Ich glaube da nicht dran
    * Weil: das kriegt keiner vern√ºnftig hin aus dem Stand eine Business Metrik zu definieren
	* Kannste Meeting um Meeting machen ohne Fortschritt
	* Ich glaube: man braucht diese Metrik bekommt die aber erst im Laufe der Zeit
	* Erst in der Phase nach den Experimenten
	* Und: man wei√ü nicht, ob die sich √ºberhaupt lohnt, die zu entwickeln, Ist ja fast ein Projekt f√ºr sich
	* Ausnahme: wir sprachen mit der TK letztes Jahr: die hatten das sowieso f√ºr ihre menschlichen Prozesse, die haben einen riesigen Vorteil
  * Mikio
    * Ja, ich glaub auch nicht, dass man das hinbekommt, bzw ist es echt schwierig. 
	* Aber ich merke auch immer wieder mal, dass Leute denken man baut so ML L√∂sungen, 
	* weil man weiss ja wie man ein Problem l√∂st. 
	* Aber zu wissen wie man das evaluieren will ist total eswentiell um das tunen zu k√∂nnen.
	* man f√§ngt ja oft mit was doofem wie accuracy an.
  * Olli
    * Ja, selbst accuracy von was haben wir hier immer noch nicht klar		
</section>

<!-- 
Titel: Der Entwicklungsprozess eines Machine Learning Projekts

Ein Tutorial aus dem Internet zu programmieren oder an einem Kaggle-Wettbewerb teilzunehmen, ist etwas ganz anderes als
die Entwicklung eines maschinellen Lernmodells, das als Teil eines Software-Stacks in Produktion gehen kann. Hierf√ºr
ben√∂tigen Sie F√§higkeiten sowohl aus der Welt der Softwareentwicklung als auch aus der Welt der Datenwissenschaft.

ALTERNATIV

Machine Learning Verfahren erfordern f√ºr ihr tiefes Verst√§ndnis Kenntnisse im Bereich der Linearen Algebra, der Analysis
und der Statistik.
F√ºr den Anwender dieser Verfahren spielt dieses Wissen aber keine wichtige Rolle.
Meist kommen Frameworks wie Scikit-Learn oder TensorFlow und sogar komplett aufgebaute und zum Teil schon trainierte
Neuronale Netzwerke zum Einsatz.
Das verschiebt die Problematik des Machine Learnings in die Richtung des Engineerings.

In diesem Talk beschreiben wir ein Modell f√ºr die unterschiedlichen Phasen eines Machine Learning Projekts und
zeigen im technischen Detail, welche Artefakte in welcher Phase entstehen und wie sie in andere Phasen √ºbergehen. Dabei
werden wir Jupyter Notebooks, Jupyter Lab, Colab und Visual Studio Code als Entwicklungsumgebungen verwenden.

M3 Kurzversion:

Ein Tutorial aus dem Internet zu programmieren oder an einem Kaggle-Wettbewerb teilzunehmen, ist etwas ganz anderes als
die Entwicklung eines Machine Learning Modells, das als Teil eines Software-Stacks in Produktion gehen kann. 
Eine der wesentlichen Herausforderungen ist, dass man einerseits interaktiv und explorativ vorgehen m√∂chte, aber gleichzeitig robust und wartbare Software schreiben muss. 
 
In diesem Talk beschreiben wir ein Modell f√ºr die unterschiedlichen Phasen eines Machine Learning Projekts und zeigen im technischen Detail, 
welche Artefakte in welcher Phase entstehen und wie diese in andere Phasen √ºbergehen.


Vorkenntnisse:

Entweder eine grundlegende Idee von der Arbeit im Bereich Data Science oder Software-Entwicklung.

Lernziele:

Teilnehmer verstehen die besondere Herausforderung der professionellen Entwicklung einer Machine Learning Modells und dazu einen passenden Ansatz.

M3 Workshop:

Fortgeschritten

Titel: Engineering eines Machine Learning Projekts mit Python

Kurzbeschreibung f√ºr M3

Eine praxistaugliche Anwendung mit Techniken des Machine Learnings zu entwickeln ist in erster Linie eine Herausforderung im Bereich des Engineerings 

In diesem Workshop gehen wir gemeinsam durch die unterschiedlichen Phasen eines Machine Learning Projekts, von der Exploration und Validierung eines Machine Learning Ansatzes √ºber
die Professionalisierung zu einem stabilen St√ºck Software bis in den produktiven Einsatz. Dabei geht es mehr um den Entwicklungsprozess und weniger um die konkret eingesetzte Technik und 
die Bibliotheken.

L√§ngere Version nur angefangen

In der ersten Phase entwickeln wir eine Machine Learning basierte L√∂sung f√ºr ein gegebenes Problem. 
Dabei iterieren wir mit der Hilfe von Notebooks schnell durch unterschiedliche Experimente. Am Ende dieser Phase haben wir unsere Idee (hoffentlich) validiert und k√∂nnen 
mit diesem Ansatz in die n√§chste Phase √ºbergehen. 

In Phase zwei professionalisieren wir unseren gefundenen Ansatz in Richtung Produktion. 




Vorkenntnisse

Teilnehmer sollten entweder mit den Werkzeugen und dem Vorgehen im Bereich Data Science und/oder als Machine Learning Engineer grundlegende Erfahrung haben. Die Sprache Python ist ebenso Grundlage.
Die Werkzeuge sind von untergeordneter Bedeutung. Kenntnisse im Bereich TensorFlow oder Scikit-Learn, Jupyter Notebooks und Colab erleichtern die Entwicklung jedoch.

Lernziel

In diesem durch praktische √úbungen gepr√§gten Workshop wollen wir zusammen die Herausforderungen kennen lernen und meistern, die sich aus dem Ziel "langfristig in Produktion" sein ergeben.

-->
<!-- <section data-markdown class="todo">
	<textarea data-template>
### Shift und Monitoring		

https://huyenchip.com/2022/02/07/data-distribution-shifts-and-monitoring.html
</textarea>
</section> -->

<section data-markdown>
	<textarea data-template>

	<img src="img/twitter-tenenholtz-zillow.png" height="400">

	https://twitter.com/marktenenholtz/status/1496107516324835331
</textarea>
</section>

<section data-markdown>
	<textarea data-template>

### Was muss man f√ºr ML k√∂nnen?	

<img src='img/role-ml-engineer.png' style="height: 400px">

Da steht nichts von Mathematik oder Verst√§ndnis wie ein neuronales Netz funktioniert.

https://boards.greenhouse.io/openai/jobs/4050138004
</textarea>
</section>


<section data-markdown>
	<textarea data-template>
		### Wer ist Olli

		<div style="display: flex;">
			<div style="flex: 50%;">
				<a href='https://oreilly.de/produkt/machine-learning-kurz-gut-2/'>
				<img src='img/ml-buch-v2.jpg' height="400">
				</a>
			</div>
			<div style="flex: 50%; font-size: x-large;">
				<img src='img/olli-opa.jpeg'>
			</div>
		</div>
		<p>
			<a target="_blank" href="mailto:OliverZeigermann@gmail.com">Oliver Zeigermann</a>:
		Entwickler, Architekt, Berater und Coach f√ºr Machine Learning
		</p>    
	</textarea>
</section>

<section data-markdown>
	<textarea data-template>
		### Wer ist Mikio
		<img src='img/mikio-data.jpeg'>

		<a target="_blank" href="mailto:mikiobraun@gmail.com">Mikio Braun</a>:
		Ex-ML Researcher, Architekt, Berater und Mentor f√ºr Machine Learning
	</textarea>
</section>

			<!-- <section data-markdown>
				<textarea data-template>
<img src='img/freud-lecturing.png'>					

<small>

https://twitter.com/cedric_p/status/1486743144163155974
</small>

				</textarea>
			</section> -->


			<!-- <section data-markdown>
				<textarea data-template>
### Wieso dieser Talk und wieso so?

* Was kann man schon machen in einem Talk?
* Einblick in meine Welt zwischen ML und Dev
* M√∂glichst realistisch und anschaulich	
* Skizzen illustrieren die Vorl√§ufigkeit aller dieser Ideen
* Jede SKizze erlebt bei jeder Iteration eine Ver√§nderung oder Verfeinerung 
	</textarea>
			</section> -->



<section data-markdown>
	<textarea data-template>
## Unser Beispiel: Vorhersage von Risiken

* Wir sind CTO einer hochinnovativen Kfz-Versicherungsgesellschaft
* Anders als andere Versicherungsgesellschaften bestimmen wir den Tarif anhand der gesch√§tzen Anzahl von Unf√§llen pro Kunde
* Zielsetzung: Wie viele Unf√§lle werden die potenziellen Kunden haben?

<img src='img/pixabay/accident-151668_1280.png' style="height: 230px">
    </textarea>
			</section>

			<section>
				<h3>Klassifizierung basierend auf bekannten Daten</h3>
				<img src="img/insurance-new/train-data.png" height="500px" class="fragment">
			</section>


			<section data-markdown>
				<textarea data-template>
### Vorhersage von Risiken f√ºr potenzielle Kunden

<a href='html/calculator.html'>
<img src='img/calculator.png' height="400">
</a>
<p><small>
<a href='html/calculator.html' target="_blank">
https://djcordhose.github.io/ml-resources/html/calculator.html</a></small>
</small></p>
	</textarea>
</section>

			<!-- <section data-markdown>
				<textarea data-template>
### Man muss sein Problem so formulieren, dass es f√ºr ML greifbar wird

<img src='img/software-complexity.png'>

<small>
Andrej Karpathy - TRAIN AI 2018 - Building the Software 2.0 Stack

https://vimeo.com/272696002

</small>
				</textarea>
			</section> -->

			<!-- <section data-markdown>
    <textarea data-template>
### Literate Statistical Programming

1. Intent
1. Code
1. Data
1. Results
1. (Interpretation)

_Idee implemented in so called "notebooks"_

<small>https://en.wikipedia.org/wiki/Literate_programming</small>
<br>
<small>https://education.arcus.chop.edu/literate-statistical-programming/</small>

</textarea>
</section> -->

			<section data-markdown style="font-size: x-large;">
				<textarea data-template>
## Schritt \#1 - Live Coding - Notebooks, interaktive Skripte

### Wie f√ºhlt sich Arbeit in Notebooks an?

https://colab.research.google.com/github/DJCordhose/ml-resources/blob/main/notebooks/process/1_all.ipynb

</textarea>
			</section>

			<section data-markdown style="font-size: x-large;">
				<textarea data-template>
## Schritt \#2 - Live Coding

### Wir bringen unser Modell in Produktion

https://colab.research.google.com/github/DJCordhose/ml-resources/blob/main/notebooks/process/3_serve.ipynb
</textarea>
			</section>

			<section data-markdown>
				<textarea data-template>
## Daten passen prima zu der Vorhersage

<img src='img/insurance-new/insurance-pred.png' class="fragment">

</textarea>
			</section>

			<section data-markdown>
				<textarea data-template>
# Fertig!

</textarea>
			</section>


			<section data-markdown>
				<textarea data-template>
# Oder?

</textarea>
			</section>

			<section data-markdown>
				<textarea data-template>
### Kann man sinnvoll direkt in Produktion gehen?

<img src='img/mikio/process-overview.png' style="height: 500px;">
    </textarea>
			</section>

			<section data-markdown>
				<textarea data-template>
			# Agenda
			
			* Phase I: _Exploration_
			* Phase II: Professionalisierung
			* Phase III: Produktion
			
				</textarea>
			</section>
						
			
			<section data-markdown class="fragments">
			### Phase I: Exploration
			
			in der ersten Phase eines Machine Learning Projekts wird die Anwendungsidee validiert und ein
			funktionsf√§higes Modell entwickelt.
			* dabei ist ein schnelles iterieren und ausprobieren von Ideen zentral
			* das Ziel ist *nicht* ein sinnvolles St√ºck Software
			* Scripting passt hier besser als Programmieren als Ausdruck f√ºr die T√§tigkeit
			* das Ziel ist eine schnelle Entwicklung
			* Phase I endet entweder mit
			  * einem funktionsf√§higen Modell mit dem man in Phase II √ºbergeht oder
			  * dem Verwerfen des Ansatzes
			
			</section>
			

			<section data-markdown>
				<textarea data-template>
### Phase I hinterl√§sst gern einen Wust an Notebooks

<img src='img/mikio/phase-i-notebooks.png'  style="height: 600px;">

    </textarea>
			</section>

			<section data-markdown class="fragments">
				<textarea data-template>
### Ist ein Wust an Notebooks ein Problem?

* das ist kein Zeichen von einem unprofessionellen Vorgehen
* ergibt sich aus der Arbeitsweise und Zielsetzung
* jeder Experimentator, erprobte ML Ansatz und jede Iteration kann eine neue, komplett entkoppelte Kopie eines Notebooks rechtfertigen
  * "Das Wichtigste in dieser Phase ist die schnelle Iteration" https://twitter.com/marktenenholtz/status/1488134981985583105
  * "Machen Sie ein einfaches Experiment nach dem anderen" https://karpathy.github.io/2019/04/25/recipe/
* nat√ºrlich wird dabei teilweise falsch entkoppelt
  * Wir kopieren alles, auch die Teile, die die beiden Notebooks gr√∂√ütenteils unver√§ndert teilen
  * Solange wir aber nicht wissen was die relevant gemeinsamen Teile sind m√ºssen wir damit weiter machen
* welcher Ansatz mehr Liebe verdient wird erst am Ende dieser Phase klar
    </textarea>
			</section>

<!-- <section data-markdown>
    <textarea data-template>
### Warum so viele unterschiedliche Experimente?

### Herausforderungen beim Training neuronaler Netze: 
## Das Training neuronaler Netze scheitert unbemerkt - die m√∂gliche Fehlerfl√§che ist gro√ü

### "Das Wichtigste in dieser Phase ist die schnelle Iteration." 
https://twitter.com/marktenenholtz/status/1488134981985583105
### "Machen Sie ein einfaches Experiment nach dem anderen" 
https://karpathy.github.io/2019/04/25/recipe/

</textarea>
</section> -->


<section data-markdown class="fragments">
    <textarea data-template>
## Was will man da denn in Produktion bringen?

_ein Modell steht nicht f√ºr sich allein_
* es braucht Code f√ºr Vor- und Nachbearbeitung
* es ist eingebettet in andere Systeme

_wer will Scripte in Produktion?_
* Notebooks sind interaktive Scripte
* Wie ruft man das denn auf?
* Welches bringen wir in Produktion?
* Wie versionieren wir das? 
* Tests/Dokumentation?
* Debugging/Show References/Refactor/Autocomplete/Quick Fix/etc.?

</textarea>
</section>


			<section data-markdown>
				<textarea data-template>
# Agenda

* Phase I: Exploration
* Phase II: _Professionalisierung_
* Phase III: Produktion

	</textarea>
			</section>

			<!-- <section data-markdown>
				<textarea data-template>
<img src='img/ml-bad.png'>					

<small>

https://twitter.com/DavidSKrueger/status/1487391569028296710
</small>

				</textarea>
			</section> -->

			<section data-markdown class="fragments">
### Phase II: Professionalisierung

in der zweiten Phase wird die skizzierte L√∂sung in ein langlebiges Projekt umgewandelt

* alle Regeln einer guten Software-Entwicklung gelten von nun an
* Stabilit√§t und Funktionalit√§t wird gew√§hrleistet
* Die Rahmenbedingungen der Produktionsumgebung m√ºssen erf√ºllt werden
* Art des Deployments, Sprache, Latenz, Speicher, Bandbreite, etc.
* Phase II endet entweder mit
  * reifem Code und Modell mit dem man in Phase III √ºbergeht oder
  * dem iterieren zur√ºck in Phase I mit neu gewonnenen Erkenntnissen oder falls Rahmenbedingungen nicht erf√ºllt werden

			</section>


<section data-markdown>
	<textarea data-template>
		<img src='img/mikio/process-details.png' style="height: 650px;">
    </textarea>
</section>

			<section data-markdown>
				<textarea data-template>
### Was geh√∂rt in Bibliotheken ausgelagert?

* Wir k√∂nnen nicht mit einem Notebook in Produktion gehen
  * also muss alles was wir in Produktion brauchen aus den Notebooks herausgezogen werden
* Bestimmte Teile eines Notebooks haben sich als stabil herausgestellt und sollten nicht bei jeder Kopie entkoppelt werden
* Alles was sich nach Software anf√ºhlt (Klassen, Funktionen, etc.) ist auch Software
  * diese Teile sollten auch wie solche behandelt werden  
    </textarea>
			</section>

			<section data-markdown style="font-size: x-large;">
				<textarea data-template>
## Schritt \#3 - Live Coding

### Entscheidende Teile in Bibliotheken auslagern

https://colab.research.google.com/github/DJCordhose/ml-resources/blob/main/notebooks/process/2_train.ipynb
</textarea>
			</section>


			<section data-markdown>
				<textarea data-template>
# Agenda

* Phase I: Exploration
* Phase II: Professionalisierung
* _Phase III: Produktion_

	</textarea>
			</section>

			<section data-markdown>
				<textarea data-template>
<img src='img/everybody-gansta.png' style="height: 600px">

<small>

https://twitter.com/karpathy/status/1486215976559398915
</small>

</textarea>
			</section>

			<!-- <section data-markdown>
				<textarea data-template>
<img src='img/twitter-taylor-ml-deployment.png'>

<small>

https://twitter.com/SamuelDataT/status/1488150832742899718
</small>

</textarea>
			</section> -->

			<section data-markdown class="fragments">
### Phase III: Produktion / Betrieb

in der dritten Phase wird die L√∂sung in Betrieb genommen

* alle Regeln des produktiven Einsatzes von Software gelten auch hier
* Monitoring hat zus√§tzliche Herausforderungen
  * Natur und Verteilung der Anfragen und auch Vorhersagen muss permanent √ºberwacht werden
* Phase III endet entweder mit
  * der Abschaltung 
    * entweder bald weil nutzlos oder
    * sp√§ter weil durch neues System ersetzt
  * dem iterieren zur√ºck in Phase II mit neu gewonnenen Erkenntnissen
  * dem iterieren zur√ºck in Phase I mit neu gewonnenen Erkenntnissen oder einem Neuansatz (h√§ufig ebenfalls ein Zeichen f√ºr einen Fehlschlag)

			</section>

			<section data-markdown class="fragments">
### Technische Umsetzung des Betriebs in Produktion

* haben wir bereits vorhin gesehen
* Ein TensorFlow Graph l√§sst sich in unterschiedlichsten Szenarien einzusetzen
  * Als Server
     * local
	 * GCP
  * Von C++
  * Von JavaScript
  * Von Java
   
			</section>


			<!-- <section data-markdown>
				### Was ist MLOps?

				_MLOps is a set of practices used to deploy and maintain machine learning models in production._

				In layman terms, MLOps covers everything that comes after model building. After a model is trained and evaluated, it is
ready for end-use. It can then make predictions on new user data entering the system.


				https://towardsdatascience.com/the-mlops-engineer-role-a-gentle-introduction-8d94cdc73904
			</section>

			<section data-markdown class="fragments">
				### Warum MLOps?

				* im akademischen Leben z√§hlt f√ºr einen Wettbewerb h√§ufig nur der Score (G√ºte) des Modells
				* dieser Ansatz hat sich im Bereich des Data Science auch in der Praxis breit gemacht
				* die Praxis ist aber keine Kaggle Competition
				* In-Sample Evaluation (auch wenn wir die vorher abgetrennt haben) sagt nur bedingt etwas f√ºr Eignung in
				einer praktsichen Anwendung aus
				* Out-Of-Sample Evaluation h√§ufig erst im produktiven Betrieb m√∂glich (evtl nur mitlaufen lassen)
			</section>
 -->
			<!-- <section data-markdown>
				<textarea data-template>
### Eine ML L√∂sung hat 2 Artefakte: Code und Modell		

* Beides muss in Prod gebracht werden
* Daten und Modell muss extern gehalten, aber zusammen mit Code versioniert werden
* Modell beschreibt einen Ausschnitt der Realit√§t. Wie finde ich heraus wie gut es das tut uns vor allem f√ºr relevante Teile der Welt und was mache ich wenn sich das √§ndert
* Richtung: Benchmark und Monitoring der L√∂sung in Produktion
* Prod geht auf Code und Modell Binaries, Modell Graph √ºberall ausf√ºhren

</textarea>
			</section>

			<section data-markdown>
				<textarea data-template>
### Nicht aller Code ist f√ºr Produktion gedacht		

* Was geht in Produktion
  * Vorhersage
  * Monitoring

* Was geht nicht in Produktion
  * Training
  * Analytics
  * Visualisierung


</textarea>
			</section>

			<section data-markdown class="fragments">
				<textarea data-template>
### Probleme: Selection/Survivor Bias

* Wir k√∂nnen nicht aktiv Daten sammeln, sondern nur von unseren Kunden
* Wir haben keine explizite Kontrolle dar√ºber, wer bei uns versichert werden will und wessen Unfalldaten wir bekommen
* Es gibt aber eine Tendenz dahin, dasss eher Kunden mit guten Konditionen kommen
* M√∂gliche L√∂sung: ab und zu risikoreichen Personen gute Angebote machen
* Neues Problem: potentielle Nachvollziehbarkeit

https://en.wikipedia.org/wiki/Survivorship_bias
</textarea>
			</section> -->

			<!-- <section data-markdown class="fragments todo" style="font-size: x-large;">
### Phase 3: Betrieb

* Schwierigkeit:
	* M√ºssen wir wieder zur√ºck ins Experiment?
	* Wie finden wir heraus, ob unser Modell gut funktioniert?

* Monitoring
	* Alles was man auch sonst monitort
	* Plus Anfragen sammeln und Vorhersagen mitschreiben

* Achtung Bias
	* Wenn wir nur die vermeintlich guten Kunden annehmen, wie k√∂nnen wir dann einen schlechten erkenen?
	* wir haben ja gar keinen oder nur wenige als Kunden
	* Einen gewissen Prozentsatz mit schlechter Hypothese ein sehr gutes Angebot machen

			</section> -->

			<!-- <section data-markdown class="todo">

- Information √ºber Schadensf√§lle neuer Kunden kommen nur verz√∂gert
- Aber neue Meldungen √ºber Schandensmeldungen kommen permanent
- wie oft neu trainieren?
- mit welchen Daten? Aktualit√§t vs Datenmenge?
- wie schnell √§ndert sich die Welt? wie schnell die Menschen die bei uns Kunden sein wollen?
- Datens√§tze schnell statistisch vergleichen mit describe
			</section>
 -->

			<section data-markdown class="fragments">
				<textarea data-template>
### Wir lassen das System ein bisschen in Produktion laufen

Mal sehen wie sich das System macht

- Information √ºber Schadensf√§lle neuer Kunden kommen nur verz√∂gert
- Aber neue Meldungen √ºber Schandensmeldungen kommen permanent
- Wir haben keine explizite Kontrolle dar√ºber, wer bei uns versichert werden will und wessen Unfalldaten wir bekommen
- Es gibt aber eine Tendenz dahin, dasss eher Kunden mit guten Konditionen kommen

<small>

https://colab.research.google.com/github/DJCordhose/ml-resources/blob/main/notebooks/mlops/3_mlops_shift.ipynb
</small>

</textarea>
			</section>


			<section data-markdown>
				<textarea data-template>

<!-- <img src='img/6monts-later.jpg' height="600px"> -->
<img src='img/2year-later.jpg' height="600px">

</textarea>
			</section>


			<section data-markdown data-transition="none">
				<textarea data-template>
## Ergebnis des Modells nach zwei Jahren

<img src='img/insurance-new/insurance-after-shift.png' class="fragment">

</textarea>
			</section>


			<section data-markdown data-transition="none">
				<textarea data-template>
## Urspr√ºngliche Daten zum direkten Vergleich

<img src='img/insurance-new/insurance-pred.png'>

</textarea>
			</section>

			<section data-markdown class="fragments">
				<textarea data-template>
### Was ist hier passiert? 

*Die Welt steht nicht still - Model und Welt laufen auseinander, aus 70%  Genauigkeit werden 65%*

* Elektroautos finden weitere Verbreitung
* potente Elektroautos haben allgemein deutlich geringere H√∂chstgeschwindigkeit 
  * aber super Beschleunigung
* Gute Beschleunigung ist viel eher Ursache f√ºr rasante Fahrweise, Unfallwahrscheinlichkeit ist hoch
* Wir haben aber nur H√∂chstgeschwindigkeit als Daten (seht im Fahrzeugschein), Korrelation war angenommen
* Der Cluster mit jungen, schlechten Fahrern ist nach unten gerutscht
* _Wird nun f√§lschlich als gut vorhergesagt und werden g√ºnstig versichert_
<!-- * Tats√§chlich sehen wir aber viele Unf√§lle -->
<!-- - Faherer vielleicht ein bisschen √§lter geworden -->
</textarea>
			</section>

			<!-- <section data-markdown>
				<textarea data-template>
### Prozess eines ML-Projekts

<img src='img/sketch/phases.png' style="height: 100%;">    
</textarea>
			</section>


			<section data-markdown>
				<textarea data-template>
### Wieso MLOps oder warum ist ein Modell nie wirklich fertig

_Concept und Data Drift_
- Vorhersagen werden ohne Nachtraining schlechter 
- die Welt entwickelt sich weiter und liefert andere Daten

_Passiert_
- pl√∂tzlich (neue oder ver√§nderte Konkurrenten, schwerwiegende Ereignisse) oder
- schleichend (gesellschaftliche Entwicklungen)

unterschiedliche Abschnitte der Daten k√∂nnen unterschiedlich schnell vergammeln

<small>

https://en.wikipedia.org/wiki/Concept_drift
<br>
https://twitter.com/chipro/status/1313921889061015557

</small>
    </textarea>
			</section> -->			

			<section data-markdown class="fragments">
				<textarea data-template>
### Wir gehen zur√ºck in die Phasen I und II

* hier wird wieder in Notebooks gearbeitet
* die Bibliotheken werden inkludiert und bei jeder √Ñnderung neu geladen
* Jupyter Lab bietet eine gemeine Oberfl√§che f√ºr Notebooks und Bibliotheken
* Eine Kombination von Visual Studio Code und Jupyer Notebooks ist ebenso m√∂glich
<!-- * Selbst Colab erlaubt das Arbeiten auf einer Kombination von Notebooks und Bibliotheken
  * Referenz: Module in Colab nutzen: https://colab.research.google.com/drive/1hDUO1-EzMVtVt6snmgrR1I1A36oPp4J9 -->
* R√ºckker in Phase I muss nicht radikal sein
  * wenn Ansatz vergleichbar kann Phase II so erhalten bleiben
  * neue Ergebnisse fliesen dann iterativ in die Professionalisierung

</textarea>
			</section>

			<section data-markdown class="fragments">
				<textarea data-template>
### Woher wei√ü man, dass man ein neues Modell in Produktion braucht?

1. Mindestens einmal im Jahr, damit man √ºberhaupt noch wei√ü wie es geht
1. Wenn die Metrik des Modells nachl√§sst in Produktion
   1. Daf√ºr braucht man die Ground Truth der Daten aus Produktion
   1. Manchmal bekommt man diese unmittelbar nach der Vorhersage durch die Reaktion eines menschlichen Benutzers
   1. Oft aber auch erst nach nennenswerter Verz√∂gerung 
1. Wenn sich die Verteilung der Daten der Anfragen deutlich von denen des Trainings unterscheiden 

</textarea>
			</section>


<section data-markdown>
### MLOps versucht diese Praktiken zusammenzufassen

_MLOps is a set of practices used to deploy and maintain machine learning models in production._

In layman terms, MLOps covers everything that comes after model building. After a model is trained and evaluated, it is
ready for end-use. It can then make predictions on new user data entering the system.


https://towardsdatascience.com/the-mlops-engineer-role-a-gentle-introduction-8d94cdc73904
			</section>

<section data-markdown>
    <textarea data-template>
## MLOps mit TFX
_TFX als ein Beispiel f√ºr MLOps mit TensorFlow_

<a href='https://www.tensorflow.org/tfx'><img src='img/mlops/tfx-√ºbersicht.jpg' style="height: 400px;"></a>
<small>
https://www.tensorflow.org/tfx
<br>
https://www.tensorflow.org/tfx/guide#tfx_standard_components
<br>
https://github.com/tensorflow/tfx
<br>
https://blog.tensorflow.org/2020/09/brief-history-of-tensorflow-extended-tfx.html
</small>

</textarea>
    </section>

			<!-- <section data-markdown>
				<textarea data-template>
### Referenz: Module in Colab nutzen

https://colab.research.google.com/drive/1hDUO1-EzMVtVt6snmgrR1I1A36oPp4J9
</textarea>
			</section>
 -->
			<section data-markdown>
				<textarea data-template>
## Vielen Dank

### Der Entwicklungsprozess eines Machine-Learning-Projekts

M3 2022, https://www.m3-konferenz.de/veranstaltung-14114-0-der-entwicklungsprozess-eines-machine-learning-projekts.html

Bleibt gern im Kontakt

Oliver Zeigermann

Mikio Braun 

https://www.linkedin.com/in/mikiobraun / [@mikiobraun](https://twitter.com/mikiobraun)


https://www.linkedin.com/in/oliver-zeigermann-34989773/  https://twitter.com/DJCordhose oliver.zeigermann@openknowledge.de


### Diese Folien: https://bit.ly/m3-2022-ml-dev

    </textarea>
			</section>


		</div>
	</div>

	<script src="reveal.js/dist/reveal.js"></script>
	<script src="lib/jquery.js"></script>
	<script>
		const printMode = window.location.search.match(/print-pdf/gi);
		const isLocal = window.location.hostname.indexOf('localhost') !== -1 ||
			window.location.hostname.indexOf('127.0.0.1') !== -1;
		const isPresentation = isLocal && !printMode;
		const isPublic = !isPresentation;

		$('.hide').remove();

		if (isPresentation) {
		} else {
			// only applies to public version
			$('.todo').remove();
			$('.preparation').remove();
			$('.local').remove();
		}

		Reveal.addEventListener('ready', function (event) {
			// applies to all versions
			$('code').addClass('line-numbers');

			$('.fragments li').addClass('fragment')

			// make all links open in new tab
			$('a').attr('target', '_blank')

			if (isPresentation) {
				// only applies to presentation version
				Reveal.configure({ controls: false });
			} else {
				// only applies to public version
				$('.fragment').removeClass('fragment');
			}

			// we do not like fragments
			// $('.fragment').removeClass('fragment');

		});

	</script>

	<script src="reveal.js/plugin/notes/notes.js"></script>
	<script src="reveal.js/plugin/markdown/markdown.js"></script>
	<script src="reveal.js/plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,
			controls: true,
			progress: true,
			history: true,
			center: true,
			width: 1100,
			slideNumber: true,
			hideInactiveCursor: false,


			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});
	</script>


</body>

</html>